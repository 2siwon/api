{% extends 'base.html' %}
<!--
1. 작성자 username나오게
2. Post를 나타내는 HTML요소를 include/post.html로 분리해서 사용
3. Post및 Comment삭제 기능 추가(작성한 유저만 가능하도록)
-->

{% block content %}
<div>
	{% for post in posts %}
	<div id="post-{{ post.pk }}" class="panel panel-default post">
		<div class="panel-heading">Head</div>
		<div class="panel-body">
			<a href="{% url 'post:post_detail' post_pk=post.pk %}">
				<img src="{{ post.photo.url }}" class="img-post">
			</a>
			<div class="body-content">
				<ul id="post-comments-{{ post.pk }}">
					{% for comment in post.comments.all %}
					<li>{{ comment.content }}</li>
					{% endfor %}
				</ul>
				<form
					action="{% url 'post:comment_create' post_pk=post.pk %}?next=/post/#post-comments-{{ post.pk }}"
					method="POST">
					{% csrf_token %}
					{{ comment_form }}
					<button class="btn btn-primary btn-block">댓글달기</button>
				</form>
			</div>
		</div>
	</div>
	{% endfor %}
</div>
{% endblock %}